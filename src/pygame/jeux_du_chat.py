import os 
import pygame

print("Debut du jeu !")
pygame.init()

# Définir un chat comme un Sprite
class Chat(pygame.sprite.Sprite):
    """Cette classe détaille un chat"""

    def __init__(self, name):
        """cette fonction permet d'initaliser un chat"""
        pygame.sprite.Sprite.__init__(self)
        # aller chercher l'image dans le bon repertoire (pas facile,j'avoue)
        self.image = pygame.image.load(os.path.join(os.path.dirname(os.path.realpath(__file__)),"image_chat.png"))
        # aller chercher un miaulement
        self.miaulement = pygame.mixer.Sound(os.path.join(os.path.dirname(os.path.realpath(__file__)),"chat_miaule.wav"))
        # convertir l'image
        self.image = self.image.convert()
        # recupérer son rectangle
        self.rect = self.image.get_rect()
        # le mettre à 100 pixels du haut de la fenetre
        self.rect.top = 100
        # Le nom du chat
        self.name = name

    def update(self):
        """Mise à jour du sprite"""
        pass

    def avancer(self):
        """Avancer le chat de 4 pixels"""
        self.rect.left += 4
        print(f"{self.name} avance vers la droite !")

    def reculer(self):
        """Reculer le chat de 4 pixels"""
        self.rect.left -= 4
        print(f"{self.name} recule vers la gauche !")

    def descendre(self):
        """Descendre le chat de 4 pixels"""
        self.rect.top += 4
        print(f"{self.name} descend !")

    def monter(self):
        """Monter le chat de 4 pixels"""
        self.rect.top -= 4
        print(f"{self.name} monte !")

    def miauler(self):
        """Faire miauler le chat"""
        self.miaulement.play()




# On met un écran de taille 1000 pixels x 800 pixels et on le remplit de gris
pygame.display.set_caption("Prout Game avec un chat")
ecran=pygame.display.set_mode((1000,800), pygame.SCALED)
ecran.fill((100,100,100))

# Créer un chat de classe Chat qu'on appelle Tao
tao=Chat("Tao")

# On déclare l'ensemble des sprits
allsprites = pygame.sprite.RenderPlain((tao))

running=True
clock=pygame.time.Clock()
while running:
    clock.tick(30)

    # Gestion des évenements
    for event in pygame.event.get():
        if event.type==pygame.QUIT:
            running=False
        if event.type==pygame.KEYDOWN and event.key==pygame.K_SPACE:
            tao.miauler()

    # Detection des appuis sur les touches
    pressed=pygame.key.get_pressed()
    if pressed[pygame.K_RIGHT]:
        tao.avancer()
    if pressed[pygame.K_LEFT]:
        tao.reculer()
    if pressed[pygame.K_UP]:
        tao.monter()
    if pressed[pygame.K_DOWN]:
        tao.descendre()

    # mise à jour des sprites
    allsprites.update() 

    # affichage
    ecran.fill((100,100,100))
    allsprites.draw(ecran)
    pygame.display.flip()





























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































pygame.QUIT